(this["webpackJsonpribeegomfkerho-app"]=this["webpackJsonpribeegomfkerho-app"]||[]).push([[0],{105:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(10),r=a.n(c),i=(a(79),a(49)),s=a(12),j=a(32),l=a.n(j),o=a(40),u=a(11),d=a(138),b=a(71),h=a(47),O=a(139),x=a(153),m=a(154),p=function(){return Object(m.a)({container:{margin:"auto"},login:{borderRadius:20,borderWidth:3,padding:20,alignItems:"center",margin:"auto"},textfield:{marginBottom:10},navButton:{color:"lightgray",fontSize:"3vw",padding:"1vh"}})},f=a.p+"static/media/kiekkonalle.f1098de8.png",g=a.p+"static/media/nalleEvil.c4c04d00.png",v=a(23),k=a.n(v),y=a(53),w=a(152),S=a(2),C=function(e){var t=p();return Object(S.jsx)(w.a,Object(y.a)(Object(y.a)({style:t.textfield},e),{},{variant:"outlined"}))},H=function(e){var t=e.handleLogin,a=Object(n.useState)(""),c=Object(u.a)(a,2),r=c[0],i=c[1],s=Object(n.useState)(""),j=Object(u.a)(s,2),l=j[0],o=j[1];return Object(S.jsxs)("div",{children:[Object(S.jsx)(C,{placeholder:"Tunnus...",name:"username",fullWidth:!0,value:r,onChange:function(e){return i(e.target.value)}}),Object(S.jsx)(C,{placeholder:"Salasana",name:"password",fullWidth:!0,value:l,onChange:function(e){return o(e.target.value)}}),Object(S.jsx)(x.a,{variant:"contained",color:"primary",onClick:function(){return t(r,l)},children:"Kirjaudu"})]})},T=function(e){var t=e.logged,a=p(),c=Object(n.useState)(!1),r=Object(u.a)(c,2),i=r[0],s=r[1],j=function(){var e=Object(o.a)(l.a.mark((function e(a,n){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.post("https://risbeegomfkerho.herokuapp.com/login",{username:a,password:n});case 3:c=e.sent,console.log(c),t.setToken(c.data),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("V\xe4\xe4r\xe4 tunnus tai salasana"),s(!0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(S.jsx)(d.a,{maxWidth:"md",children:Object(S.jsxs)(b.a,{style:a.login,elevation:4,children:[Object(S.jsx)(h.a,{variant:"h4",children:i?"V\xe4\xe4r\xe4 tunnus tai salasana perkele":"Terve vaan"}),Object(S.jsxs)(O.a,{container:!0,direction:"row",justifyContent:"flex-start",children:[Object(S.jsx)(O.a,{item:!0,xs:6,children:Object(S.jsx)("img",{src:i?g:f,alt:"Kiekkonalle",width:"100%"})}),Object(S.jsx)(O.a,{item:!0,xs:6,style:{marginTop:"10%",minWidth:140},children:t.logged?Object(S.jsx)(x.a,{variant:"contained",color:"primary",onClick:function(){return t.clearToken()},children:"Logout"}):Object(S.jsx)(H,{handleLogin:j})})]})]})})},B=a(155),E=a(140),L=function(){var e=Object(n.useState)(null),t=Object(u.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){(function(){var e=Object(o.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.localStorage.getItem("passuToken"),e.prev=1,e.next=4,k.a.get("https://risbeegomfkerho.herokuapp.com/api/games",{headers:{Authorization:"bearer "+t}});case 4:a=e.sent,c(a.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("Virhe, "+e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]),a},P=function(e){var t=e.game;return Object(S.jsxs)(b.a,{style:{marginBottom:10,maxWidth:700,padding:10},elevation:2,children:[Object(S.jsx)(h.a,{variant:"h5",children:t.course.name}),Object(S.jsx)(h.a,{variant:"subtitle1",children:t.course.layout}),Object(S.jsx)(h.a,{variant:"subtitle2",children:t.date}),Object(S.jsxs)(O.a,{container:!0,spacing:2,direction:"row",justifyContent:"flex-start",children:[Object(S.jsx)("div",{style:{margin:10,padding:5},children:Object(S.jsxs)("strong",{children:[Object(S.jsx)(O.a,{item:!0,children:"Pelaaja"}),Object(S.jsx)(O.a,{item:!0,children:"Tulos"}),Object(S.jsx)(O.a,{item:!0,children:"+/-"}),Object(S.jsx)(O.a,{item:!0,children:"HC"}),Object(S.jsx)(O.a,{item:!0,children:"HC tulos"}),Object(S.jsx)(O.a,{item:!0,children:"Sija"}),Object(S.jsx)(O.a,{item:!0,children:"HC Sija"})]})}),t.players.map((function(e){return Object(S.jsx)(W,{player:e},e.name+t.course.date)}))]})]})},W=function(e){var t=e.player,a=1===t.rankHC?{fontWeight:800,margin:10,backgroundColor:"#fff3d1",padding:5}:{margin:10,padding:5};return Object(S.jsxs)("div",{style:a,children:[Object(S.jsx)(O.a,{item:!0,children:t.name}),Object(S.jsx)(O.a,{item:!0,children:t.total}),Object(S.jsx)(O.a,{item:!0,children:t.plusminus}),Object(S.jsx)(O.a,{item:!0,children:Math.round(100*t.HC)/100}),Object(S.jsx)(O.a,{item:!0,children:Math.round(100*t.totalHC)/100}),Object(S.jsx)(O.a,{item:!0,children:t.rank}),Object(S.jsx)(O.a,{item:!0,children:t.rankHC})]})},z=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],c=t[1],r=L();return null!==r&&r?Object(S.jsxs)(d.a,{children:[Object(S.jsx)(h.a,{variant:"h4",gutterBottom:!0,children:"Kilpailut"}),Object(S.jsx)(w.a,{variant:"outlined",size:"small",value:a,placeholder:"Suodata radan nimell\xe4",margin:"normal",onChange:function(e){return c(e.target.value)}}),r.filter((function(e){return e.course.name.toLowerCase().includes(a.toLowerCase())})).map((function(e){return Object(S.jsx)(P,{game:e},e.course.name+e.date)}))]}):Object(S.jsx)(B.a,{open:!0,children:Object(S.jsx)(E.a,{})})},I=a(141),N=a(142),V=a(143),D=a(144),K=a(145),M=a(146),R=a(147),F=a(148),J=a(149),A=function(e){var t=e.rata;return Object(S.jsxs)(I.a,{component:b.a,elevation:3,style:{marginBottom:10},children:[Object(S.jsx)(N.a,{title:t.course.name,subheader:t.course.layout}),Object(S.jsx)(V.a,{children:Object(S.jsx)(D.a,{children:Object(S.jsxs)(K.a,{size:"small",className:"taulu",children:[Object(S.jsx)(M.a,{children:Object(S.jsxs)(R.a,{children:[Object(S.jsx)(F.a,{children:"Nimi"}),Object(S.jsx)(F.a,{children:"HC"}),Object(S.jsx)(F.a,{children:"Pelit"}),Object(S.jsx)(F.a,{children:"Keskiarvo"}),Object(S.jsx)(F.a,{children:"Mediaani"}),Object(S.jsx)(F.a,{children:"Viim. 10 kierrosta"})]})}),Object(S.jsx)(J.a,{children:t.players.sort((function(e,t){return t.games-e.games})).map((function(e){return Object(S.jsx)(U,{pelaaja:e},e.name+t.course.name+t.course.layout)}))})]})})})]})},U=function(e){var t=e.pelaaja,a=t.name,n=t.games,c=t.average,r=t.median,i=t.lastRounds,s=t.hc;return Object(S.jsxs)(R.a,{children:[Object(S.jsx)(F.a,{children:Object(S.jsx)("b",{children:a})}),Object(S.jsx)(F.a,{children:s}),Object(S.jsx)(F.a,{children:n}),Object(S.jsx)(F.a,{children:Math.round(100*c)/100}),Object(S.jsx)(F.a,{children:r}),Object(S.jsx)(F.a,{children:JSON.stringify(i.reverse()).slice(1,-1).replace(/[,]/g,", ")})]})},Y=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),i=Object(u.a)(r,2),s=i[0],j=i[1];return Object(n.useEffect)((function(){k.a.get("https://risbeegomfkerho.herokuapp.com/api/hc",{headers:{authorization:"bearer "+window.localStorage.getItem("passuToken")}}).then((function(e){c(e.data)}))}),[]),0===a.length?Object(S.jsx)(B.a,{open:!0,children:Object(S.jsx)(E.a,{})}):Object(S.jsxs)(d.a,{children:[Object(S.jsx)(h.a,{variant:"h3",children:"Handicapit"}),Object(S.jsx)(C,{placeholder:"Etsi rata",value:s,onChange:function(e){return j(e.target.value)},size:"small"}),a.filter((function(e){return e.course.name.includes(s)})).map((function(e){return Object(S.jsx)(A,{rata:e},e.course.name+e.course.layout)}))]})},q=a(150),G=a(151),Q=function(e){var t=e.to,a=e.children,n=Object(s.f)(),c=p();return Object(S.jsx)(x.a,{onClick:function(){return n.push(t)},style:c.navButton,children:a})},X=function(e){var t=e.logged,a=Object(n.useState)({opacity:1}),c=Object(u.a)(a,2),r=c[0],i=c[1];return Object(n.useEffect)((function(){window.addEventListener("scroll",(function(){var e=1-Number(window.scrollY)/1e3;i(e<.1?{visibility:"hidden"}:{opacity:e})}))}),[]),Object(S.jsx)(q.a,{position:"sticky",style:r,children:Object(S.jsxs)(G.a,{style:{flex:1,flexDirection:"row",justifyContent:"space-between"},children:[Object(S.jsx)(Q,{to:"/",children:"Etusivu"}),t.logged&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(Q,{to:"/points",children:"Pisteet"}),Object(S.jsx)(Q,{to:"/games",children:"Pelit"}),Object(S.jsx)(Q,{to:"/hc",children:"HC"}),Object(S.jsx)(Q,{to:"/upload",children:"L\xe4het\xe4 .csv"})]})]})})},Z=a(52),$=[5,4,3,2,1,0],_=function(e){var t=e.pelaaja,a=e.i;return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(R.a,{children:[Object(S.jsxs)(F.a,{children:[a+1,"."]}),Object(S.jsx)(F.a,{children:t.name}),Object(S.jsx)(F.a,{children:t.pisteet})]})})},ee=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(-1),i=Object(u.a)(r,2),s=i[0],j=i[1],l=L();return Object(n.useEffect)((function(){if(null!==l&&l){var e,t=[],a=Object(Z.a)(l);try{for(a.s();!(e=a.n()).done;){var n,r=e.value,i=Object(Z.a)(r.players);try{var s=function(){var e=n.value,a=t.find((function(t){return t.name===e.name}));a&&null!==a||(a={name:e.name,pisteet:0,sijoitukset:[0,0,0,0,0,0],pelit:0},t.push(a)),a.pisteet+=$[e.rankHC-1]||0,a.pelit++,a.sijoitukset[e.rankHC-1]++};for(i.s();!(n=i.n()).done;)s()}catch(j){i.e(j)}finally{i.f()}}}catch(j){a.e(j)}finally{a.f()}c(t.sort((function(e,t){return t.pisteet-e.pisteet})))}}),[l]),Object(S.jsxs)(d.a,{children:[Object(S.jsx)(h.a,{variant:"h4",gutterBottom:!0,children:"Pistetaulukko"}),Object(S.jsx)(D.a,{component:b.a,style:{borderRadius:10,marginBottom:30,maxWidth:500},children:Object(S.jsxs)(K.a,{children:[Object(S.jsx)(M.a,{children:Object(S.jsxs)(R.a,{children:[Object(S.jsx)(F.a,{children:"Sija"}),Object(S.jsx)(F.a,{children:"Pelaaja"}),Object(S.jsx)(F.a,{children:"Pisteet"})]})}),Object(S.jsx)(J.a,{children:a.map((function(e,t){return Object(S.jsx)(_,{i:t,pelaaja:e,handleOnClick:j,selected:s},e.name)}))})]})}),Object(S.jsx)(h.a,{variant:"h5",children:"Pisteiden jako"}),Object(S.jsx)(D.a,{component:b.a,style:{borderRadius:20,maxWidth:500},children:Object(S.jsxs)(K.a,{children:[Object(S.jsx)(M.a,{children:Object(S.jsxs)(R.a,{children:[Object(S.jsx)(F.a,{children:"Sija"}),Object(S.jsx)(F.a,{children:"Pisteet"})]})}),Object(S.jsx)(J.a,{children:$.map((function(e,t){return Object(S.jsxs)(R.a,{children:[Object(S.jsxs)(F.a,{children:[t+1,"."]}),Object(S.jsx)(F.a,{children:e})]},t)}))})]})})]})},te=function(e){var t=e.stats;return Object(S.jsxs)(b.a,{style:{padding:10,marginBottom:10},elevation:3,children:[Object(S.jsxs)(h.a,{variant:"h4",children:["Pelej\xe4 lis\xe4tty: ",Object(S.jsx)("b",{children:t.uusia})]}),Object(S.jsxs)(h.a,{variant:"h5",children:["Duplikaatteja: ",Object(S.jsx)("b",{children:t.duplikaatteja})]}),Object(S.jsx)(h.a,{variant:"h5",children:"Hyl\xe4tyt tuloskortit"}),Object(S.jsxs)("ul",{children:[Object(S.jsxs)("li",{children:["V\xe4\xe4r\xe4 p\xe4iv\xe4: ",t.wrongDate," kpl"]}),Object(S.jsxs)("li",{children:["V\xe4\xe4r\xe4 nimi: ",t.wrongName.count," kpl"]}),Object(S.jsx)("ul",{children:t.wrongName.names.map((function(e){return Object(S.jsx)("li",{children:e},e)}))})]})]})},ae=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(null),i=Object(u.a)(r,2),s=i[0],j=i[1];return Object(S.jsxs)(d.a,{maxWidth:"md",children:[Object(S.jsx)(B.a,{open:a,children:Object(S.jsx)(E.a,{})}),null!==s&&Object(S.jsx)(te,{stats:s}),Object(S.jsx)(h.a,{variant:"h4",gutterBottom:!0,children:"L\xe4het\xe4 .csv"}),Object(S.jsx)(h.a,{paragraph:!0,children:"L\xe4het\xe4 Udiscin .csv tiedosto"}),Object(S.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("filu",e.target.filu.files[0]);var a=window.localStorage.getItem("passuToken");c(!0),k.a.post("https://risbeegomfkerho.herokuapp.com/upload",t,{headers:{Authorization:"bearer "+a}}).then((function(e){console.log(e.data),j(e.data)})).catch((function(e){console.log("Error",e)})).finally((function(){c(!1)}))},children:[Object(S.jsx)(C,{type:"file",name:"filu"}),Object(S.jsx)("br",{}),Object(S.jsx)(x.a,{type:"submit",variant:"contained",color:"primary",children:"L\xe4het\xe4"})]})]})},ne=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){null!==window.localStorage.getItem("passuToken")&&c(!0)}),[]),{logged:a,setToken:function(e){window.localStorage.setItem("passuToken",e),c(!0)},clearToken:function(){window.localStorage.clear(),c(!1)}}},ce=function(){var e=ne();return Object(S.jsxs)(i.a,{children:[Object(S.jsx)(X,{logged:e}),Object(S.jsxs)(s.c,{children:[Object(S.jsx)(s.a,{path:"/games",children:Object(S.jsx)(z,{})}),Object(S.jsx)(s.a,{path:"/points",children:Object(S.jsx)(ee,{})}),Object(S.jsx)(s.a,{path:"/hc",children:Object(S.jsx)(Y,{})}),Object(S.jsx)(s.a,{path:"/upload",children:Object(S.jsx)(ae,{})}),Object(S.jsx)(s.a,{path:"/",children:Object(S.jsx)(T,{logged:e})})]})]})};r.a.render(Object(S.jsx)(ce,{}),document.getElementById("root"))},79:function(e,t,a){}},[[105,1,2]]]);
//# sourceMappingURL=main.67db0fa5.chunk.js.map