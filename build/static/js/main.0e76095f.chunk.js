(this["webpackJsonpribeegomfkerho-app"]=this["webpackJsonpribeegomfkerho-app"]||[]).push([[0],{103:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(10),c=n.n(r),i=(n(77),n(48)),s=n(11),j=n(32),o=n.n(j),l=n(40),u=n(136),d=n(104),h=n(137),b=n(138),O=n(149),x=n(150),m=function(){return Object(x.a)({container:{margin:"auto"},login:{borderRadius:20,borderWidth:3,padding:20,alignItems:"center",margin:"auto"},textfield:{marginBottom:10},navButton:{color:"lightgray",fontSize:"3vw",padding:"1vh"}})},p=n.p+"static/media/kiekkonalle.f1098de8.png",f=n(23),g=n.n(f),v=n(14),k=n(52),y=n(148),w=n(2),S=function(e){var t=m();return Object(w.jsx)(y.a,Object(k.a)(Object(k.a)({style:t.textfield},e),{},{variant:"outlined"}))},C=function(e){var t=e.handleLogin,n=Object(a.useState)(""),r=Object(v.a)(n,2),c=r[0],i=r[1],s=Object(a.useState)(""),j=Object(v.a)(s,2),o=j[0],l=j[1];return Object(w.jsxs)("div",{children:[Object(w.jsx)(S,{placeholder:"Tunnus...",name:"username",fullWidth:!0,value:c,onChange:function(e){return i(e.target.value)}}),Object(w.jsx)(S,{placeholder:"Salasana",name:"password",fullWidth:!0,value:o,onChange:function(e){return l(e.target.value)}}),Object(w.jsx)(O.a,{variant:"contained",color:"primary",onClick:function(){return t(c,o)},children:"Kirjaudu"})]})},H=function(e){var t=e.logged,n=m(),a=function(){var e=Object(l.a)(o.a.mark((function e(n,a){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.post("https://risbeegomfkerho.herokuapp.com/login",{username:n,password:a});case 3:r=e.sent,console.log(r),t.setToken(r.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("V\xe4\xe4r\xe4 tunnus tai salasana");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}();return console.log(window.localStorage.getItem("passuToken")),Object(w.jsx)(u.a,{maxWidth:"md",children:Object(w.jsxs)(d.a,{style:n.login,elevation:4,children:[Object(w.jsx)(h.a,{variant:"h4",children:"Terve vaan"}),Object(w.jsxs)(b.a,{container:!0,direction:"row",justifyContent:"flex-start",children:[Object(w.jsx)(b.a,{item:!0,xs:6,children:Object(w.jsx)("img",{src:p,alt:"Kiekkonalle",width:"100%"})}),Object(w.jsx)(b.a,{item:!0,xs:6,style:{marginTop:"10%",minWidth:140},children:t.logged?Object(w.jsx)(O.a,{variant:"contained",color:"primary",onClick:function(){return t.clearToken()},children:"Logout"}):Object(w.jsx)(C,{handleLogin:a})})]})]})})},T=n(151),W=n(139),B=function(){var e=Object(a.useState)(null),t=Object(v.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.localStorage.getItem("passuToken"),e.prev=1,e.next=4,g.a.get("https://risbeegomfkerho.herokuapp.com/api/games",{headers:{Authorization:"bearer "+t}});case 4:n=e.sent,r(n.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("Virhe, "+e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]),n},L=function(e){var t=e.game;return Object(w.jsxs)(d.a,{style:{marginBottom:10,maxWidth:700,padding:10},elevation:2,children:[Object(w.jsx)(h.a,{variant:"h5",children:t.course.name}),Object(w.jsx)(h.a,{variant:"subtitle1",children:t.course.layout}),Object(w.jsx)(h.a,{variant:"subtitle2",children:t.course.date}),Object(w.jsxs)(b.a,{container:!0,spacing:2,direction:"row",justifyContent:"flex-start",children:[Object(w.jsx)("div",{style:{margin:10,padding:5},children:Object(w.jsxs)("strong",{children:[Object(w.jsx)(b.a,{item:!0,children:"Pelaaja"}),Object(w.jsx)(b.a,{item:!0,children:"Tulos"}),Object(w.jsx)(b.a,{item:!0,children:"+/-"}),Object(w.jsx)(b.a,{item:!0,children:"HC"}),Object(w.jsx)(b.a,{item:!0,children:"HC tulos"}),Object(w.jsx)(b.a,{item:!0,children:"Sija"}),Object(w.jsx)(b.a,{item:!0,children:"HC Sija"})]})}),t.players.map((function(e){return Object(w.jsx)(P,{player:e},e.name+t.course.date)}))]})]})},P=function(e){var t=e.player,n=1===t.rankHC?{fontWeight:800,margin:10,backgroundColor:"#fff3d1",padding:5}:{margin:10,padding:5};return Object(w.jsxs)("div",{style:n,children:[Object(w.jsx)(b.a,{item:!0,children:t.name}),Object(w.jsx)(b.a,{item:!0,children:t.total}),Object(w.jsx)(b.a,{item:!0,children:t.plusminus}),Object(w.jsx)(b.a,{item:!0,children:Math.round(100*t.HC)/100}),Object(w.jsx)(b.a,{item:!0,children:Math.round(100*t.totalHC)/100}),Object(w.jsx)(b.a,{item:!0,children:t.rank}),Object(w.jsx)(b.a,{item:!0,children:t.rankHC})]})},I=function(){var e=Object(a.useState)(""),t=Object(v.a)(e,2),n=t[0],r=t[1],c=B();return null!==c&&c?Object(w.jsxs)(u.a,{children:[Object(w.jsx)(h.a,{variant:"h4",gutterBottom:!0,children:"Kilpailut"}),Object(w.jsx)(y.a,{variant:"outlined",size:"small",value:n,placeholder:"Suodata radan nimell\xe4",margin:"normal",onChange:function(e){return r(e.target.value)}}),c.filter((function(e){return e.course.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return Object(w.jsx)(L,{game:e},e.course.name+e.course.date)}))]}):Object(w.jsx)(T.a,{children:Object(w.jsx)(W.a,{})})},E=function(e){var t=e.rata;return Object(w.jsx)("div",{children:Object(w.jsxs)("li",{children:[t.course.name," / ",t.course.layout,Object(w.jsx)("ul",{children:t.players.map((function(e){return Object(w.jsx)(z,{pelaaja:e},e.name+t.course.name+t.course.layout)}))})]})})},z=function(e){var t=e.pelaaja;return Object(w.jsxs)("li",{children:[Object(w.jsx)("strong",{children:t.name}),", pelej\xe4: ",t.games,", viim 10: ",JSON.stringify(t.lastRounds),", mediaani: ",t.median,", keskiarvo: ",Math.round(1e3*t.average)/1e3,", HC: ",Object(w.jsx)("strong",{children:t.hc})]})},D=function(){var e=Object(a.useState)([]),t=Object(v.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){g.a.get("https://risbeegomfkerho.herokuapp.com/api/hc",{headers:{authorization:"bearer "+window.localStorage.getItem("passuToken")}}).then((function(e){r(e.data)}))}),[]),Object(w.jsxs)(u.a,{children:[Object(w.jsx)(h.a,{variant:"h3",children:"Handicapit"}),Object(w.jsx)("ul",{children:n.map((function(e){return Object(w.jsx)(E,{rata:e},e.course.name+e.course.layout)}))})]})},F=n(140),R=n(141),V=function(e){var t=e.to,n=e.children,a=Object(s.f)(),r=m();return Object(w.jsx)(O.a,{onClick:function(){return a.push(t)},style:r.navButton,children:n})},K=function(e){var t=e.logged;return Object(w.jsx)(F.a,{position:"static",children:Object(w.jsxs)(R.a,{children:[Object(w.jsx)(V,{to:"/",children:"Etusivu"}),t.logged&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(V,{to:"/points",children:"Pisteet"}),Object(w.jsx)(V,{to:"/games",children:"Pelit"}),Object(w.jsx)(V,{to:"/hc",children:"HC"}),Object(w.jsx)(V,{to:"/upload",children:"L\xe4het\xe4 .csv"})]})]})})},M=n(51),J=n(142),N=n(143),A=n(144),U=n(145),q=n(146),G=n(147),Q=[10,6,4,3,2,1],X=function(e){var t=e.pelaaja,n=e.i,a=e.handleOnClick,r=e.selected;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(U.a,{hover:"true",onClick:function(){return a(n)},children:[Object(w.jsxs)(q.a,{children:[n+1,"."]}),Object(w.jsx)(q.a,{children:t.name}),Object(w.jsx)(q.a,{children:t.pisteet})]}),r===n&&Object(w.jsx)(Y,{pelaaja:t})]})},Y=function(e){var t=e.pelaaja;return Object(w.jsx)(U.a,{children:Object(w.jsxs)(q.a,{colSpan:3,children:["Voittoprosentti: ",Object(w.jsx)("strong",{children:Math.round(t.sijoitukset[0]/t.pelit*1e4)/100}),Object(w.jsx)("br",{}),"Pelej\xe4: ",Object(w.jsx)("strong",{children:t.pelit}),Object(w.jsxs)(b.a,{container:!0,direction:"row",justifyContent:"flex-start",style:{width:200,margin:20},children:[Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(b.a,{item:!0,xs:6,children:Object(w.jsx)("strong",{children:"Sijoitus"})}),Object(w.jsx)(b.a,{item:!0,xs:6,children:Object(w.jsx)("strong",{children:"Kertoja"})})]}),t.sijoitukset.map((function(e,t){return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(b.a,{item:!0,xs:6,children:t+1}),Object(w.jsx)(b.a,{item:!0,xs:6,children:e})]})}))]})]})})},Z=function(){var e=Object(a.useState)([]),t=Object(v.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(-1),i=Object(v.a)(c,2),s=i[0],j=i[1],o=B();return Object(a.useEffect)((function(){if(null!==o&&o){var e,t=[],n=Object(M.a)(o);try{for(n.s();!(e=n.n()).done;){var a,c=e.value,i=Object(M.a)(c.players);try{var s=function(){var e=a.value,n=t.find((function(t){return t.name===e.name}));n&&null!==n||(n={name:e.name,pisteet:0,sijoitukset:[0,0,0,0,0,0],pelit:0},t.push(n)),n.pisteet+=Q[e.rankHC-1]||0,n.pelit++,n.sijoitukset[e.rankHC-1]++};for(i.s();!(a=i.n()).done;)s()}catch(j){i.e(j)}finally{i.f()}}}catch(j){n.e(j)}finally{n.f()}r(t.sort((function(e,t){return t.pisteet-e.pisteet})))}}),[o]),console.log(n),Object(w.jsxs)(u.a,{children:[Object(w.jsx)(h.a,{variant:"h4",gutterBottom:!0,children:"Pistetaulukko"}),Object(w.jsx)(J.a,{component:d.a,style:{borderRadius:10,marginBottom:30,maxWidth:500},children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(A.a,{children:Object(w.jsxs)(U.a,{children:[Object(w.jsx)(q.a,{children:"Sija"}),Object(w.jsx)(q.a,{children:"Pelaaja"}),Object(w.jsx)(q.a,{children:"Pisteet"})]})}),Object(w.jsx)(G.a,{children:n.map((function(e,t){return Object(w.jsx)(X,{i:t,pelaaja:e,handleOnClick:j,selected:s},e.name)}))})]})}),Object(w.jsx)(h.a,{variant:"h5",children:"Pisteiden jako"}),Object(w.jsx)(J.a,{component:d.a,style:{borderRadius:20,maxWidth:500},children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(A.a,{children:Object(w.jsxs)(U.a,{children:[Object(w.jsx)(q.a,{children:"Sija"}),Object(w.jsx)(q.a,{children:"Pisteet"})]})}),Object(w.jsx)(G.a,{children:Q.map((function(e,t){return Object(w.jsxs)(U.a,{hover:"true",children:[Object(w.jsxs)(q.a,{children:[t+1,"."]}),Object(w.jsx)(q.a,{children:e})]})}))})]})})]})},$=function(e){var t=e.stats;return Object(w.jsxs)("div",{children:[Object(w.jsxs)(h.a,{variant:"h5",children:["Uusia tuloksia ",Object(w.jsx)("b",{children:t.newResults})]}),Object(w.jsx)(h.a,{variant:"h5",children:"Hyl\xe4tyt tulokset"}),Object(w.jsxs)("ul",{children:[Object(w.jsxs)("li",{children:["V\xe4\xe4r\xe4 p\xe4iv\xe4: ",t.ignored.wrongDate," kpl"]}),Object(w.jsxs)("li",{children:["V\xe4\xe4r\xe4 nimi: ",t.ignored.wrongName.count," kpl"]}),Object(w.jsx)("li",{children:"Hyl\xe4tyt nimet:"}),Object(w.jsx)("ul",{children:t.ignored.wrongName.names.map((function(e){return Object(w.jsx)("li",{children:e})}))}),Object(w.jsxs)("li",{children:["Duplikaatit: ",t.ignored.duplicates]})]})]})},_=function(){var e=Object(a.useState)(!1),t=Object(v.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),i=Object(v.a)(c,2),s=i[0],j=i[1];return Object(w.jsxs)(u.a,{maxWidth:"md",children:[Object(w.jsx)(T.a,{open:n,transitionDuration:2e3,children:Object(w.jsx)(W.a,{})}),null!==s&&Object(w.jsx)($,{stats:s}),Object(w.jsx)(h.a,{variant:"h4",gutterBottom:!0,children:"L\xe4het\xe4 .csv"}),Object(w.jsx)(h.a,{paragraph:!0,children:"L\xe4het\xe4 Udiscin .csv tiedosto"}),Object(w.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("filu",e.target.filu.files[0]);var n=window.localStorage.getItem("passuToken");r(!0),g.a.post("https://risbeegomfkerho.herokuapp.com/upload",t,{headers:{Authorization:"bearer "+n}}).then((function(e){console.log(e.data),j(e.data)})).catch((function(e){console.log("Error",e)})).finally((function(){r(!1)}))},children:[Object(w.jsx)(S,{type:"file",name:"filu"}),Object(w.jsx)("br",{}),Object(w.jsx)(O.a,{type:"submit",variant:"contained",color:"primary",children:"L\xe4het\xe4"})]})]})},ee=function(){var e=Object(a.useState)(!1),t=Object(v.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){null!==window.localStorage.getItem("passuToken")&&r(!0)}),[]),{logged:n,setToken:function(e){window.localStorage.setItem("passuToken",e),r(!0)},clearToken:function(){window.localStorage.clear(),r(!1)}}},te=function(){var e=ee();return Object(w.jsxs)(i.a,{children:[Object(w.jsx)(K,{logged:e}),Object(w.jsxs)(s.c,{children:[Object(w.jsx)(s.a,{path:"/games",children:Object(w.jsx)(I,{})}),Object(w.jsx)(s.a,{path:"/points",children:Object(w.jsx)(Z,{})}),Object(w.jsx)(s.a,{path:"/hc",children:Object(w.jsx)(D,{})}),Object(w.jsx)(s.a,{path:"/upload",children:Object(w.jsx)(_,{})}),Object(w.jsx)(s.a,{path:"/",children:Object(w.jsx)(H,{logged:e})})]})]})};c.a.render(Object(w.jsx)(te,{}),document.getElementById("root"))},77:function(e,t,n){}},[[103,1,2]]]);
//# sourceMappingURL=main.0e76095f.chunk.js.map