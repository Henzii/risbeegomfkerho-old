(this["webpackJsonpribeegomfkerho-app"]=this["webpackJsonpribeegomfkerho-app"]||[]).push([[0],{172:function(e,t,a){},201:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(14),r=a.n(c),s=(a(172),a(108)),i=a(21),j=a(27),l=a.n(j),o=a(47),u=a(9),d=a(253),b=a(81),O=a(254),h=a(70),x=a(139),p=function(){return Object(x.a)({container:{margin:"auto"},login:{borderRadius:15,borderWidth:3,padding:20,alignItems:"center",margin:"auto",marginTop:"20%",maxWidth:"500px"},textfield:{marginBottom:10},navButton:{color:"darkblue",fontSize:"3vw",padding:"1vh"}})},m=a.p+"static/media/kiekkonalle.f1098de8.png",f=a.p+"static/media/nalleEvil.c4c04d00.png",g=a(58),v=a.n(g),k=a(76),y=a(120),w=a(2),C=function(e){var t=p();return Object(w.jsx)(y.a,Object(k.a)(Object(k.a)({style:t.textfield},e),{},{variant:"outlined"}))},S=function(e){var t=e.handleLogin,a=Object(n.useState)(""),c=Object(u.a)(a,2),r=c[0],s=c[1],i=Object(n.useState)(""),j=Object(u.a)(i,2),l=j[0],o=j[1];return Object(w.jsxs)("div",{children:[Object(w.jsx)(C,{placeholder:"Tunnus...",name:"username",value:r,onChange:function(e){return s(e.target.value)}}),Object(w.jsx)("br",{}),Object(w.jsx)(C,{placeholder:"Salasana",name:"password",value:l,onChange:function(e){return o(e.target.value)}}),Object(w.jsx)("br",{}),Object(w.jsx)(h.a,{variant:"contained",color:"primary",onClick:function(){return t(r,l)},children:"Kirjaudu"})]})},H=function(e){var t=e.logged,a=(p(),Object(n.useState)(!1)),c=Object(u.a)(a,2),r=c[0],s=c[1],i=function(){var e=Object(o.a)(l.a.mark((function e(a,n){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.post("https://risbeegomfkerho.herokuapp.com/login",{username:a,password:n});case 3:c=e.sent,console.log(c),t.setToken(c.data),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("V\xe4\xe4r\xe4 tunnus tai salasana"),s(!0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(w.jsxs)(d.a,{maxWidth:"md",style:{padding:60},children:[Object(w.jsx)(b.a,{variant:"h4",children:r?"V\xe4\xe4r\xe4 tunnus tai salasana perkele":"Teretulemast"}),Object(w.jsxs)(O.a,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[Object(w.jsx)(O.a,{item:!0,xs:6,children:Object(w.jsx)("img",{src:r?f:m,alt:"Kiekkonalle",width:"100%"})}),Object(w.jsx)(O.a,{item:!0,xs:6,children:t.logged?Object(w.jsx)(h.a,{variant:"contained",color:"primary",onClick:function(){return t.clearToken()},children:"Logout"}):Object(w.jsx)(S,{handleLogin:i})})]})]})},T=a(51),N=a(20),z=a(271),E=a(208),F=a(255),P=a(256),B=a(257),L=a(258),I=a(209),V=a(259),K=a(260),R=a(261),D=a(262),M=a(263),W=a(264),A=function(){var e=Object(o.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.localStorage.getItem("passuToken"),e.prev=1,e.next=4,v.a.get("/api/games",{headers:{Authorization:"bearer "+t}});case 4:return a=e.sent,e.abrupt("return",a.data);case 8:return e.prev=8,e.t0=e.catch(1),console.log("Virhe, "+e.t0.message),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(n.useState)(null),t=Object(u.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,A();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[]),a},_=a(25),U=a(16),q=function(e){var t=e.game,a=Object(n.useState)(!1),c=Object(u.a)(a,2),r=c[0],s=c[1],i=Object(n.useState)(!1),j=Object(u.a)(i,2),l=j[0],o=j[1];return Object(w.jsxs)(P.a,{style:{marginBottom:10},children:[Object(w.jsx)(B.a,{title:t.course.name,subheader:Object(w.jsxs)(w.Fragment,{children:[t.course.layout,Object(w.jsx)("br",{}),Object(w.jsx)("span",{style:{fontSize:"0.7em"},children:t.date})]}),action:Object(w.jsx)(h.a,{onClick:function(){return s(!r)},children:"Viivoja"})}),Object(w.jsxs)(L.a,{children:["N\xe4yt\xe4 tuloskehitys: ",Object(w.jsx)(I.a,{checked:l,onChange:function(){return o(!l)}}),Object(w.jsx)(V.a,{children:Object(w.jsxs)(K.a,{size:"small",padding:"none",className:"peliTaulu",children:[Object(w.jsx)(R.a,{children:Object(w.jsxs)(D.a,{children:[Object(w.jsx)(F.a,{children:"Pelaaja"}),t.players[0].score.reduce((function(e,t,a){return""!==t?[].concat(Object(N.a)(e),[Object(w.jsx)(F.a,{children:a+1})]):e}),[]),Object(w.jsx)(F.a,{children:"Total"}),Object(w.jsx)(F.a,{children:"+/-"}),Object(w.jsx)(F.a,{children:"HC +/-"}),Object(w.jsx)(F.a,{children:"HC rank"})]})}),Object(w.jsx)(M.a,{children:t.players.sort((function(e,t){return e.rankHC-t.rankHC})).map((function(e){return Object(w.jsx)(G,{player:e,rataPar:t.course.pars,showProgress:l},t.date+e.name)}))})]})})]}),Object(w.jsx)(W.a,{in:r,unmountOnExit:!0,children:Object(w.jsxs)(_.c,{data:Q(t,l),style:{maxHeight:350},children:[t.players.map((function(e){return Object(w.jsx)(_.e,{argumentField:"Rata",valueField:e.name,name:e.name})})),Object(w.jsx)(_.a,{}),Object(w.jsx)(_.g,{}),Object(w.jsx)(_.d,{position:"right"}),Object(w.jsx)(U.a,{})]})})]})},G=function(e){var t=e.player,a=e.rataPar,n=e.showProgress,c=function(e,t){switch(e-+a[t]){case 0:return"#dfefdf";case-1:return"#82b7ff";case-2:return"#f5e942";case 1:return"#ffe382";default:return"#f5a182"}},r=0;return Object(w.jsxs)(D.a,{children:[Object(w.jsx)(F.a,{children:t.name}),t.score.map((function(e,t){return r+=e-+a[t],""!==e?Object(w.jsx)(F.a,{style:{backgroundColor:c(e,t)},children:n?r:e}):null})),Object(w.jsx)(F.a,{children:t.total}),Object(w.jsx)(F.a,{children:t.plusminus}),Object(w.jsx)(F.a,{children:t.plusminus-t.HC}),Object(w.jsx)(F.a,{children:t.rankHC})]})},Q=function(e,t){return e.players.reduce((function(a,n){var c=0,r=n.score.reduce((function(a,r,s){if(""===r)return a;c+=r-e.course.pars[s];var i=t?c:r;return[].concat(Object(N.a)(a),[Object(T.a)({Rata:s+1},n.name,Number(i))])}),[]);return[].concat(Object(N.a)(a),Object(N.a)(r))}),[])},X=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],c=t[1],r=J();return null!==r&&r?Object(w.jsxs)(d.a,{children:[Object(w.jsx)(b.a,{variant:"h4",gutterBottom:!0,children:"Kilpailut"}),Object(w.jsx)(y.a,{variant:"outlined",size:"small",value:a,placeholder:"Suodata radan nimell\xe4",margin:"normal",onChange:function(e){return c(e.target.value)}}),r.filter((function(e){return e.course.name.toLowerCase().includes(a.toLowerCase())})).reverse().map((function(e){return Object(w.jsx)(q,{game:e},e.course.name+e.date)}))]}):Object(w.jsx)(z.a,{open:!0,children:Object(w.jsx)(E.a,{})})},Y=a(98),Z=a(74),$=function(e){var t=e.data;return Object(w.jsx)(Y.a,{children:Object(w.jsxs)(_.c,{style:{maxHeight:250},data:t,children:[Object(w.jsx)(_.e,{valueField:"value",argumentField:"index"}),Object(w.jsx)(_.a,{}),Object(w.jsx)(_.g,{}),Object(w.jsx)(U.a,{})]})})},ee=a(3),te=function(e){var t=e.data;return Object(w.jsx)(Y.a,{children:Object(w.jsxs)(_.c,{data:t,style:{maxHeight:250},children:[Object(w.jsx)(U.c,{factory:ee.zb}),Object(w.jsx)(_.a,{}),Object(w.jsx)(_.g,{}),Object(w.jsx)(_.d,{}),Object(w.jsx)(_.f,{text:"Ratadata"}),Object(w.jsx)(_.b,{argumentField:"nimi",valueField:"keskiarvo",name:"Keskiarvo"}),Object(w.jsx)(_.b,{argumentField:"nimi",valueField:"mediaani",name:"Mediaani"}),Object(w.jsx)(U.a,{}),Object(w.jsx)(U.k,{})]})})},ae=a(265),ne=function(){var e=Object(o.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.localStorage.getItem("passuToken"),e.prev=1,e.next=4,v.a.get("/api/hc",{headers:{Authorization:"bearer "+t}});case 4:return a=e.sent,e.abrupt("return",a.data);case 8:return e.prev=8,e.t0=e.catch(1),console.log("Virhe, "+e.t0.message),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(n.useState)(null),t=Object(u.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,ne();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[]),a},re=function(e){var t=e.rata,a=Object(n.useState)(!1),c=Object(u.a)(a,2),r=c[0],s=c[1];return Object(w.jsxs)(P.a,{component:Y.a,elevation:3,style:{marginBottom:10},children:[Object(w.jsx)(B.a,{title:t.course.name,subheader:t.course.layout,action:Object(w.jsx)(Z.a,{onClick:function(){return s(!r)},children:Object(w.jsx)(ae.a,{})})}),Object(w.jsxs)(L.a,{children:[Object(w.jsx)(V.a,{children:Object(w.jsxs)(K.a,{size:"small",className:"taulu",children:[Object(w.jsx)(R.a,{children:Object(w.jsxs)(D.a,{children:[Object(w.jsx)(F.a,{children:"Nimi"}),Object(w.jsx)(F.a,{children:"HC"}),Object(w.jsx)(F.a,{children:"Pelit"}),Object(w.jsx)(F.a,{children:"Keskiarvo"}),Object(w.jsx)(F.a,{children:"Mediaani"}),Object(w.jsx)(F.a,{children:"Viim. 10 kierrosta"})]})}),Object(w.jsx)(M.a,{children:t.players.sort((function(e,t){return t.games-e.games})).map((function(e){return Object(w.jsx)(se,{pelaaja:e},e.name+t.course.name+t.course.layout)}))})]})}),Object(w.jsxs)(W.a,{in:r,unmountOnExit:!0,children:[Object(w.jsx)(te,{data:t.players.map((function(e){return{nimi:e.name,keskiarvo:e.average,mediaani:e.median,hc:e.hc}}))}),Object(w.jsx)(h.a,{onClick:function(){return s(!1)},children:"Sulje..."})]})]})]})},se=function(e){var t=e.pelaaja,a=t.name,c=t.games,r=t.average,s=t.median,i=t.lastRounds,j=t.hc,l=Object(n.useState)(!1),o=Object(u.a)(l,2),d=o[0],b=o[1];return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(D.a,{onClick:function(){return b(!d)},children:[Object(w.jsx)(F.a,{children:Object(w.jsx)("b",{children:a})}),Object(w.jsx)(F.a,{children:j}),Object(w.jsx)(F.a,{children:c}),Object(w.jsx)(F.a,{children:Math.round(100*r)/100}),Object(w.jsx)(F.a,{children:s}),Object(w.jsx)(F.a,{children:JSON.stringify(i.slice(0,10)).slice(1,-1).replace(/[,]/g,", ")})]}),Object(w.jsx)(D.a,{children:Object(w.jsx)(F.a,{style:{paddingBottom:0,paddingTop:0,border:0},colSpan:6,children:Object(w.jsx)(W.a,{in:d,unmountOnExit:!0,children:Object(w.jsx)($,{data:i.slice().reverse().map((function(e,t){return{index:t,value:e}}))})})})})]})},ie=function(){var e=ce(),t=Object(n.useState)(""),a=Object(u.a)(t,2),c=a[0],r=a[1];return null===e?Object(w.jsx)(z.a,{open:!0,children:Object(w.jsx)(E.a,{})}):Object(w.jsxs)(d.a,{children:[Object(w.jsx)(b.a,{variant:"h3",children:"Handicapit"}),Object(w.jsx)(C,{placeholder:"Etsi rata",value:c,onChange:function(e){return r(e.target.value)},size:"small"}),e.filter((function(e){return e.course.name.includes(c)})).map((function(e){return Object(w.jsx)(re,{rata:e},e.course.name+e.course.layout)}))]})},je=a(44),le=a(99),oe=a(52),ue=a(266),de=a(145),be=[0,5,4,3,2,1,0,0,0,0,0,0,0,0,0],Oe=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)("rank"),s=Object(u.a)(r,2),i=s[0],j=s[1],l=J();if(Object(n.useEffect)((function(){if(null!==l){var e,t=[],a=Object(je.a)(l);try{for(a.s();!(e=a.n()).done;){var n,r=e.value,s=Object(je.a)(r.players);try{var i=function(){var e=n.value,a=t.find((function(t){return t.name===e.name}));null!==a&&a||(a={name:e.name,points:0,id:e.name},t.push(a)),e.points=be[e.rankHC],a.points+=e.points,a[r._id]=e};for(s.s();!(n=s.n()).done;)i()}catch(j){s.e(j)}finally{s.f()}}}catch(j){a.e(j)}finally{a.f()}console.log(t),c(t)}}),[l]),null===l)return Object(w.jsx)(z.a,{open:!0,children:Object(w.jsx)(E.a,{})});var o=l.map((function(e,t){return{headerName:t+1,field:e._id,width:73,description:"".concat(e.course.name," / ").concat(e.course.layout," (").concat(e.date,")")}}));o.unshift({headerName:"Pelaaja",field:"name",width:100}),o.push({headerName:"Points total",field:"points",width:100});var O=a.map((function(e){var t=Object(k.a)({},e);return Object.keys(t).map((function(e){return"object"===typeof t[e]&&(t[e]=t[e][i]),t[e]})),t}));return console.log(O),Object(w.jsxs)(d.a,{children:[Object(w.jsx)(b.a,{variant:"h4",children:"Kisataulukko"}),"N\xe4yt\xe4 data: ",Object(w.jsxs)(le.a,{variant:"outlined",size:"small",onChange:function(e){console.log(e.target.value),j(e.target.value)},value:i,children:[Object(w.jsx)(oe.a,{value:"rank",children:"Rank"}),Object(w.jsx)(oe.a,{value:"rankHC",children:"RankHC"}),Object(w.jsx)(oe.a,{value:"total",children:"Total"}),Object(w.jsx)(oe.a,{value:"totalHC",children:"TotalHC"}),Object(w.jsx)(oe.a,{value:"plusminus",children:"Plusminus"}),Object(w.jsx)(oe.a,{value:"HC",children:"Handicap"}),Object(w.jsx)(oe.a,{value:"points",children:"Points"})]}),Object(w.jsx)(ue.a,{style:{marginBottom:15,marginTop:15}}),Object(w.jsx)(de.a,{className:"datataulu",disableColumnMenu:!0,autoHeight:!0,rows:O,columns:o,pageSize:15})]})},he=a(268),xe=a(269),pe=a(267),me=function(e){var t=e.to,a=e.children,n=Object(i.f)(),c=p();return Object(w.jsx)(h.a,{onClick:function(){return n.push(t)},style:c.navButton,children:a})},fe=a(148),ge=a.n(fe),ve=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],c=t[1];return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{style:{position:"fixed"},children:Object(w.jsx)(he.a,{in:!a,direction:"down",children:Object(w.jsx)(Z.a,{onClick:function(){c(!0),setTimeout((function(){c(!1)}),8e3)},children:Object(w.jsx)(ge.a,{style:{transform:"scale(1.5)"}})})})}),Object(w.jsx)(he.a,{in:a,direction:"right",timeout:1500,children:Object(w.jsx)(xe.a,{position:"sticky",style:{backgroundColor:"#efefef",opacity:.9},children:Object(w.jsxs)(pe.a,{style:{flex:0,flexDirection:"row",justifyContent:"space-between"},componen:"span",children:[Object(w.jsx)(me,{to:"/",children:"Etusivu"}),Object(w.jsx)(me,{to:"/points",children:"Kisataulu"}),Object(w.jsx)(me,{to:"/games",children:"Pelit"}),Object(w.jsx)(me,{to:"/hc",children:"HC"}),Object(w.jsx)(me,{to:"/upload",children:"L\xe4het\xe4 .csv"})]})})})]})},ke=function(e){var t=e.stats;return Object(w.jsxs)(Y.a,{style:{padding:10,marginBottom:10},elevation:3,children:[Object(w.jsxs)(b.a,{variant:"h4",children:["Pelej\xe4 lis\xe4tty: ",Object(w.jsx)("b",{children:t.uusia})]}),Object(w.jsxs)(b.a,{variant:"h5",children:["Duplikaatteja: ",Object(w.jsx)("b",{children:t.duplikaatteja})]}),Object(w.jsx)(b.a,{variant:"h5",children:"Hyl\xe4tyt tuloskortit"}),Object(w.jsxs)("ul",{children:[Object(w.jsxs)("li",{children:["V\xe4\xe4r\xe4 p\xe4iv\xe4: ",t.wrongDate," kpl"]}),Object(w.jsxs)("li",{children:["V\xe4\xe4r\xe4 nimi: ",t.wrongName.count," kpl"]}),Object(w.jsx)("ul",{children:t.wrongName.names.map((function(e){return Object(w.jsx)("li",{children:e},e)}))})]})]})},ye=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(null),s=Object(u.a)(r,2),i=s[0],j=s[1];return Object(w.jsxs)(d.a,{maxWidth:"md",children:[Object(w.jsx)(z.a,{open:a,children:Object(w.jsx)(E.a,{})}),null!==i&&Object(w.jsx)(ke,{stats:i}),Object(w.jsx)(b.a,{variant:"h4",gutterBottom:!0,children:"L\xe4het\xe4 .csv"}),Object(w.jsx)(b.a,{paragraph:!0,children:"L\xe4het\xe4 Udiscin .csv tiedosto"}),Object(w.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("filu",e.target.filu.files[0]);var a=window.localStorage.getItem("passuToken");c(!0),v.a.post("https://risbeegomfkerho.herokuapp.com/upload",t,{headers:{Authorization:"bearer "+a}}).then((function(e){console.log(e.data),j(e.data)})).catch((function(e){console.log("Error",e)})).finally((function(){c(!1)}))},children:[Object(w.jsx)(C,{type:"file",name:"filu"}),Object(w.jsx)("br",{}),Object(w.jsx)(h.a,{type:"submit",variant:"contained",color:"primary",children:"L\xe4het\xe4"})]})]})},we=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){null!==window.localStorage.getItem("passuToken")&&c(!0)}),[]),{logged:a,setToken:function(e){window.localStorage.setItem("passuToken",e),c(!0)},clearToken:function(){window.localStorage.clear(),c(!1)}}},Ce=function(){var e=we();return Object(w.jsxs)(s.a,{children:[e.logged&&Object(w.jsx)(ve,{}),Object(w.jsxs)(i.c,{children:[Object(w.jsx)(i.a,{path:"/games",children:Object(w.jsx)(X,{})}),Object(w.jsx)(i.a,{path:"/points",children:Object(w.jsx)(Oe,{})}),Object(w.jsx)(i.a,{path:"/hc",children:Object(w.jsx)(ie,{})}),Object(w.jsx)(i.a,{path:"/upload",children:Object(w.jsx)(ye,{})}),Object(w.jsx)(i.a,{path:"/",children:Object(w.jsx)(H,{logged:e})})]})]})};r.a.render(Object(w.jsx)(Ce,{}),document.getElementById("root"))}},[[201,1,2]]]);
//# sourceMappingURL=main.215d4632.chunk.js.map